<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monster Age/Level Optimizer</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Monster Age & Level Optimizer</h1>

      <form id="calculator-form">
        <div class="form-grid">
          <!-- Monster Details -->
          <div class="form-group">
            <label for="rarity">Rarity:</label>
            <select id="rarity" required>
              <option value="Common" selected>Common</option>
              <option value="Uncommon">Uncommon</option>
              <option value="Rare">Rare</option>
              <option value="Epic">Epic</option>
              <option value="Legendary">Legendary</option>
            </select>
          </div>
          <div class="form-group">
            <label for="class">Class:</label>
            <select id="class" required>
              <option value="Aqua" selected>Aqua</option>
              <option value="Reptile">Reptile</option>
              <option value="Beast">Beast</option>
              <option value="Plant">Plant</option>
              <option value="Bird">Bird</option>
              <option value="Ghost">Ghost</option>
            </select>
          </div>

          <!-- Levels -->
          <div class="form-group">
            <label for="current-level">Current Level (0-29):</label>
            <input
              type="number"
              id="current-level"
              value="0"
              min="0"
              max="29"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="max-level">Target Level (1-30):</label>
            <input
              type="number"
              id="max-level"
              value="30"
              min="1"
              max="30"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="current-age">Current Age (Years):</label>
            <input
              type="number"
              id="current-age"
              value="0"
              min="0"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="current-edurance"
              >Endurance Used
              <span style="font-size: 9px">(For Age calculation)</span>:</label
            >
            <input
              type="number"
              id="current-edurance"
              value="0"
              max="99"
              step="1"
              required
            />
          </div>
          <!-- Stats -->
          <div class="form-group">
            <label for="current-proficiency">Current Total Proficiency:</label>
            <input
              type="number"
              id="current-proficiency"
              value="0"
              min="0"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="current-recovery">Current Total Recovery:</label>
            <input
              type="number"
              id="current-recovery"
              value="1"
              min="0"
              step="1"
              required
            />
          </div>

          <!-- Simulation Params -->
          <div class="form-group">
            <label for="energy-per-action">Energy per Hunt Action:</label>
            <input
              type="number"
              id="energy-per-action"
              value="1"
              min="1"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="target-age">Target Age (Years):</label>
            <input
              type="number"
              id="target-age"
              value="10"
              min="1"
              step="1"
              required
            />
          </div>
          <div class="form-group">
            <label for="slove-balance">Slove Balance:
              <span style="font-size: 9px; color: #888"
              >used for leveling simulation</span
            >
            </label>
            <input
              type="number"
              id="slove-balance"
              value="0"
              min="0"
              step="1"
              required
            />
          </div>
        </div>

        <fieldset>
          <legend>Leader Stats</legend>
          <span style="font-size: 9px; color: #888"
            >Leader stats are used for Leveling Scenarios only. if you are using
            the Simulation target as the leader ignore this</span
          >
          <div class="form-grid">
            <div class="form-group">
              <label for="leader-rarity">Leader Rarity:</label>
              <select id="leader-rarity" required>
                <option value="Common" selected>Common</option>
                <option value="Uncommon">Uncommon</option>
                <option value="Rare">Rare</option>
                <option value="Epic">Epic</option>
                <option value="Legendary">Legendary</option>
              </select>
            </div>
            <div class="form-group">
              <label for="leader-class">Leader Class:</label>
              <select id="leader-class" required>
                <option value="Aqua" selected>Aqua</option>
                <option value="Reptile">Reptile</option>
                <option value="Beast">Beast</option>
                <option value="Plant">Plant</option>
                <option value="Bird">Bird</option>
                <option value="Ghost">Ghost</option>
              </select>
            </div>
            <div class="form-group">
              <label for="leader-level">Leader Level:</label>
              <input
                type="number"
                id="leader-level"
                value="0"
                min="0"
                max="30"
                step="1"
                required
              />
            </div>
            <div class="form-group">
              <label for="leader-proficiency">Leader Proficiency:</label>
              <input
                type="number"
                id="leader-proficiency"
                value="1"
                min="0"
                step="1"
                required
              />
            </div>
            <div class="form-group">
              <label for="leader-recovery">Leader Recovery:</label>
              <input
                type="number"
                id="leader-recovery"
                value="1"
                min="0"
                step="1"
                required
              />
            </div>
          </div>
        </fieldset>
        <button type="button" id="calculate-button">
          Calculate Optimal Build
        </button>
      </form>

      <div id="results-area">
        <!-- Structured Results Output -->
        <div id="results-card" class="card" style="display: none">
          <h2 id="results-title"></h2>
          <div id="results-summary" class="success-summary"></div>
          <div class="results-section">
            <h3>Optimal Bonus Points</h3>
            <dl class="results-dl">
              <dt>Proficiency</dt>
              <dd id="result-proficiency"></dd>
              <dt>Recovery</dt>
              <dd id="result-recovery"></dd>
            </dl>
          </div>
          <div class="results-section">
            <h3>Final Stats at Target Level</h3>
            <dl class="results-dl">
              <dt>Total Proficiency</dt>
              <dd id="result-final-proficiency"></dd>
              <dt>Total Recovery</dt>
              <dd id="result-final-recovery"></dd>
            </dl>
          </div>
          <div class="results-section">
            <h3>Earnings Outcome</h3>
            <dl class="results-dl">
              <dt>Endurance/Hunt</dt>
              <dd id="result-endurance-hunt"></dd>
              <dt>Hunts to Target Age</dt>
              <dd id="result-hunts-target-age"></dd>
              <dt>BASE SLOV/Hunt</dt>
              <dd id="result-base-slove-hunt"></dd>
              <dt>Max Total BASE SLOV</dt>
              <dd id="result-max-total-slove"></dd>
              <dt>Recovery Cost/Hunt</dt>
              <dd id="result-recovery-cost"></dd>
            </dl>
          </div>
          <div
            class="results-section"
            id="results-single-hunt-section"
            style="display: none"
          >
            <h3>Single Hunt Earnings</h3>
            <dl class="results-dl">
              <dt>SLOV Earned</dt>
              <dd id="result-single-hunt"></dd>
            </dl>
          </div>
          <div id="results-table-container"></div>
          <div id="scenario-log-container" style="display: none;">
         </div>
         <div id="scenario-explanations" class="results-section">
          <h3>Understanding the Leveling Scenarios</h3>
          <p>
            This simulation compares different strategies for reaching the target level
            (<code>maxLevel</code>). Here's a breakdown of each scenario:
          </p>
        
          <dl class="explanation-dl">
            <dt>1. Leader Scenario</dt>
            <dd>
              <ul>
                <li>
                  <strong>Concept:</strong> Represents leveling up the monster
                  <em>using only itself</em> for hunts. It cannot hunt while a level-up
                  is in progress.
                </li>
                <li>
                  <strong>Hunting:</strong> Uses the monster's <em>own stats</em>
                  (Proficiency and Recovery) at its current simulated level. These stats
                  improve as it levels up based on the optimal point distribution found
                  earlier.
                </li>
                <li>
                  <strong>Decision:</strong> At each step (when energy is full and not
                  leveling), it checks if it has enough $SLOVE for the next level.
                  <ul>
                    <li>
                      If YES: It starts the level-up process and waits for the required
                      time (from Level Up Data).
                    </li>
                    <li>
                      If NO: It performs a hunt, earns $SLOVE, and waits for energy to
                      refill before the next decision.
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Use Case:</strong> Simulates focusing solely on this one
                  monster.
                </li>
              </ul>
            </dd>
        
            <dt>2. Bulk Scenario (using External Leader)</dt>
            <dd>
              <ul>
                <li>
                  <strong>Concept:</strong> Represents using a
                  <em>different, dedicated monster</em> (the "External Leader" defined
                  by the Leader Stats inputs) to farm $SLOVE while the primary monster
                  levels up. The primary monster doesn't hunt in this scenario. This strategy prioritizes
                  leveling up as soon as funds are available.
                </li>
                <li>
                  <strong>Hunting:</strong> Uses the <em>fixed stats</em> of the
                  External Leader for all hunts.
                </li>
                <li>
                  <strong>Decision:</strong> At each step (when energy is full and not
                  leveling), it checks if it has enough $SLOVE for the next level(s).
                  <ul>
                    <li>
                      If YES: It levels up (potentially multiple times if affordable),
                      waiting the required time for <em>each</em> level gained. It
                      does <em>not</em> hunt immediately after these level-ups.
                    </li>
                    <li>
                      If NO (or after finishing all affordable level-ups): It performs a
                      hunt using the External Leader to earn more $SLOVE.
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Use Case:</strong> Simulates having a strong "farmer" monster
                  provide funds, allowing the main monster to level rapidly whenever
                  funds are available, minimizing its own activity.
                </li>
              </ul>
            </dd>
        
            <dt>3. Alternate Scenario (using External Leader)</dt>
            <dd>
              <ul>
                <li>
                  <strong>Concept:</strong> Also uses the External Leader for farming,
                  but adopts a strategy of immediately hunting after starting a
                  level-up to maximize activity and income generation.
                </li>
                <li>
                  <strong>Hunting:</strong> Uses the <em>fixed stats</em> of the
                  External Leader for all hunts.
                </li>
                <li>
                  <strong>Decision:</strong> At each step (when energy is full):
                  <ul>
                    <li>Checks if it has enough $SLOVE for the next level.</li>
                    <li>
                      If YES: It starts the level-up process (timer begins) AND
                      <em>immediately</em> performs a hunt with the External Leader in
                      the same step. Energy refills and the level-up timer run
                      concurrently.
                    </li>
                    <li>
                      If NO: It performs a hunt with the External Leader (provided no
                      level-up timer is currently active from a previous step).
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Use Case:</strong> Simulates aggressively using the External
                  Leader for income, effectively multi-tasking leveling and hunting.
                </li>
              </ul>
            </dd>
          </dl>
        
          <h4>Boost Option</h4>
          <ul>
            <li>
              For each scenario, a "(Boosted)" version is also simulated, indicated by
              "Boost Used: Yes" in the summary table.
            </li>
            <li>
              If boosting is enabled for a run, the simulation assumes you will spend
              extra $SLOVE (from Boost data) to make each level-up
              <strong>instant</strong>, skipping the time wait, whenever you have
              enough $SLOVE for both the level cost <em>and</em> the boost cost.
            </li>
            <li>
              The simulation may also choose to "Wait for Boost" - performing extra
              hunts until boost is affordable if that's calculated to be faster than
              waiting for the normal level-up time. These strategic decisions are noted
              in the "Leveling Scenario Details" log for boosted runs.
            </li>
          </ul>
        
          <h4>Which scenario is best?</h4>
          <p>
            Compare the "Total Time" and "Net SLOV" columns in the summary table. The
            "best" scenario depends on whether you prioritize speed (lowest time) or
            $SLOVE efficiency (highest net $SLOVE). Using Boost generally reduces time
            but costs significantly more $SLOVE.
          </p>
        </div>
       </div>
        </div>
        <div id="results-error" class="error" style="display: none"></div>
        <div id="results-placeholder">
          <p>Enter your monster's details and click calculate.</p>
        </div>
      </div>
    </div>

    <script type="module" src="/js/main.js"></script>
  </body>
</html>
